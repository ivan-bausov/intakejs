var context_1 = require("./context");
var Injector = (function () {
    function Injector() {
        this.is_test_context = false;
        this.context = new context_1["default"]();
        var self = this;
        this.Service = function (target) {
            self.getContext().register(target.service_name, function () { return new target(); });
            return target;
        };
        this.Injectable = function (runtime_id) {
            return function (target) {
                self.getContext().register(runtime_id, function () { return new target(); });
            };
        };
        this.Inject = function (runtime_id) {
            return function (target, key) {
                Object.defineProperty(target, key, {
                    get: function () {
                        return self.getContext().resolve(runtime_id);
                    },
                    set: function () {
                        throw new Error("Cannot set injected field \"" + key + "\"");
                    }
                });
            };
        };
        this.ConstructorInject = function () {
            var runtime_ids = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                runtime_ids[_i - 0] = arguments[_i];
            }
            return function (target) {
                // save a reference to the original constructor
                var original = target;
                // a utility function to generate instances of a class
                function construct(constructor, args) {
                    var c = function () {
                        return constructor.apply(this, args);
                    };
                    c.prototype = constructor.prototype;
                    return new c();
                }
                // the new constructor behaviour
                var f = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i - 0] = arguments[_i];
                    }
                    var injected_deps = [];
                    var i = 0;
                    for (var _a = 0; _a < runtime_ids.length; _a++) {
                        var id = runtime_ids[_a];
                        if (typeof args[i] === 'undefined') {
                            injected_deps.push(self.getContext().resolve(id));
                        }
                        else {
                            injected_deps.push(args[i]);
                        }
                        i++;
                    }
                    return construct(original, injected_deps);
                };
                // copy prototype so intanceof operator still works
                f.prototype = original.prototype;
                // return new constructor (will override original)
                return f;
            };
        };
    }
    Injector.prototype.getContext = function () {
        return this.context;
    };
    Injector.prototype.mock = function (runtime_id, mock) {
        this.createTestContext();
        this.getContext().register(runtime_id, mock, true);
    };
    Injector.prototype.clearMocks = function () {
        this.clearTestContext();
    };
    Injector.prototype.createTestContext = function () {
        if (this.is_test_context) {
            return;
        }
        this.old_context = this.context;
        this.context = this.context.clone();
        this.is_test_context = true;
    };
    Injector.prototype.clearTestContext = function () {
        this.context = this.old_context;
        this.old_context = null;
        this.is_test_context = false;
    };
    return Injector;
})();
exports.__esModule = true;
exports["default"] = Injector;
function isString(s) {
    return typeof s === 'string';
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluamVjdG9yLnRzIl0sIm5hbWVzIjpbIkluamVjdG9yIiwiSW5qZWN0b3IuY29uc3RydWN0b3IiLCJJbmplY3Rvci5jb25zdHJ1Y3Rvci5jb25zdHJ1Y3QiLCJJbmplY3Rvci5nZXRDb250ZXh0IiwiSW5qZWN0b3IubW9jayIsIkluamVjdG9yLmNsZWFyTW9ja3MiLCJJbmplY3Rvci5jcmVhdGVUZXN0Q29udGV4dCIsIkluamVjdG9yLmNsZWFyVGVzdENvbnRleHQiLCJpc1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBQUEsd0JBQW9CLFdBQVcsQ0FBQyxDQUFBO0FBV2hDO0lBQ0VBO1FBMkhRQyxvQkFBZUEsR0FBWUEsS0FBS0EsQ0FBQ0E7UUFFakNBLFlBQU9BLEdBQWFBLElBQUlBLG9CQUFPQSxFQUFFQSxDQUFDQTtRQTVIeENBLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBO1FBRWhCQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxVQUFDQSxNQUEyQkE7WUFDekNBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLFlBQVlBLEVBQUVBLGNBQUlBLE9BQUFBLElBQUlBLE1BQU1BLEVBQUVBLEVBQVpBLENBQVlBLENBQUNBLENBQUNBO1lBRWxFQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUNoQkEsQ0FBQ0EsQ0FBQ0E7UUFFRkEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsVUFBQ0EsVUFBa0JBO1lBQ25DQSxNQUFNQSxDQUFDQSxVQUFDQSxNQUFvQkE7Z0JBQzFCQSxJQUFJQSxDQUFDQSxVQUFVQSxFQUFFQSxDQUFDQSxRQUFRQSxDQUFDQSxVQUFVQSxFQUFFQSxjQUFJQSxPQUFBQSxJQUFJQSxNQUFNQSxFQUFFQSxFQUFaQSxDQUFZQSxDQUFDQSxDQUFDQTtZQUMzREEsQ0FBQ0EsQ0FBQUE7UUFDSEEsQ0FBQ0EsQ0FBQ0E7UUFFRkEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsVUFBQ0EsVUFBa0JB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VUEsRUFBRUEsSUFBSUEsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDckRBLENBQUNBO0lBRU1KLDZCQUFVQSxHQUFqQkE7UUFDRUssSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxFQUFFQSxDQUFDQTtJQUMxQkEsQ0FBQ0E7SUFFTUwsb0NBQWlCQSxHQUF4QkE7UUFDRU0sRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDekJBLE1BQU1BLENBQUNBO1FBQ1RBLENBQUNBO1FBQ0RBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBO1FBQ2hDQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUNwQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDOUJBLENBQUNBO0lBRU1OLG1DQUFnQkEsR0FBdkJBO1FBQ0VPLElBQUlBLENBQUNBLE9BQU9BLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBO1FBQ2hDQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUN4QkEsSUFBSUEsQ0FBQ0EsZUFBZUEsR0FBR0EsS0FBS0EsQ0FBQ0E7SUFDL0JBLENBQUNBO0lBT0hQLGVBQUNBO0FBQURBLENBaklBLEFBaUlDQSxJQUFBO0FBaklEOzZCQWlJQyxDQUFBO0FBR0Qsa0JBQWtCLENBQUM7SUFDakJRLE1BQU1BLENBQUNBLE9BQU9BLENBQUNBLEtBQUtBLFFBQVFBLENBQUNBO0FBQy9CQSxDQUFDQSIsImZpbGUiOiJpbmplY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb250ZXh0IGZyb20gXCIuL2NvbnRleHRcIjtcbmltcG9ydCB7SUNvbnRleHR9IGZyb20gXCIuL2NvbnRleHRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJU2VydmljZUNvbnN0cnVjdG9yIGV4dGVuZHMgSUNvbnN0cnVjdG9ye1xuICBzZXJ2aWNlX25hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29uc3RydWN0b3Ige1xuICBuZXcoKTogYW55O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbmplY3RvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgIHRoaXMuU2VydmljZSA9ICh0YXJnZXQ6IElTZXJ2aWNlQ29uc3RydWN0b3IpID0+IHtcbiAgICAgIHNlbGYuZ2V0Q29udGV4dCgpLnJlZ2lzdGVyKHRhcmdldC5zZXJ2aWNlX25hbWUsICgpPT5uZXcgdGFyZ2V0KCkpO1xuXG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH07XG5cbiAgICB0aGlzLkluamVjdGFibGUgPSAocnVudGltZV9pZDogc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gKHRhcmdldDogSUNvbnN0cnVjdG9yKSA9PiB7XG4gICAgICAgIHNlbGYuZ2V0Q29udGV4dCgpLnJlZ2lzdGVyKHJ1bnRpbWVfaWQsICgpPT5uZXcgdGFyZ2V0KCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLkluamVjdCA9IChydW50aW1lX2lkOiBzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiAodGFyZ2V0OiBhbnksIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0Q29udGV4dCgpLnJlc29sdmUocnVudGltZV9pZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNldCBpbmplY3RlZCBmaWVsZCBcIiR7a2V5fVwiYClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLkNvbnN0cnVjdG9ySW5qZWN0ID0gKC4uLnJ1bnRpbWVfaWRzOiBzdHJpbmdbXSkgPT4ge1xuICAgICAgcmV0dXJuICh0YXJnZXQ6IEZ1bmN0aW9uKT0+e1xuICAgICAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBjb25zdHJ1Y3RvclxuICAgICAgICB2YXIgb3JpZ2luYWwgPSB0YXJnZXQ7XG5cbiAgICAgICAgLy8gYSB1dGlsaXR5IGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGluc3RhbmNlcyBvZiBhIGNsYXNzXG4gICAgICAgIGZ1bmN0aW9uIGNvbnN0cnVjdChjb25zdHJ1Y3RvciwgYXJncykge1xuICAgICAgICAgIHZhciBjIDogYW55ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgYy5wcm90b3R5cGUgPSBjb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgICAgICAgcmV0dXJuIG5ldyBjKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGUgbmV3IGNvbnN0cnVjdG9yIGJlaGF2aW91clxuICAgICAgICB2YXIgZiA6IGFueSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG5cbiAgICAgICAgICBsZXQgaW5qZWN0ZWRfZGVwcyA9IFtdO1xuICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICBmb3IgKGxldCBpZCBvZiBydW50aW1lX2lkcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2ldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpbmplY3RlZF9kZXBzLnB1c2goc2VsZi5nZXRDb250ZXh0KCkucmVzb2x2ZShpZCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW5qZWN0ZWRfZGVwcy5wdXNoKGFyZ3NbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29uc3RydWN0KG9yaWdpbmFsLCBpbmplY3RlZF9kZXBzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBjb3B5IHByb3RvdHlwZSBzbyBpbnRhbmNlb2Ygb3BlcmF0b3Igc3RpbGwgd29ya3NcbiAgICAgICAgZi5wcm90b3R5cGUgPSBvcmlnaW5hbC5wcm90b3R5cGU7XG5cbiAgICAgICAgLy8gcmV0dXJuIG5ldyBjb25zdHJ1Y3RvciAod2lsbCBvdmVycmlkZSBvcmlnaW5hbClcbiAgICAgICAgcmV0dXJuIGY7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cbiAgLyoqXG4gICAqIHJlZ2lzdGVycyBhIHNlcnZpY2VcbiAgICogQHBhcmFtIHRhcmdldFxuICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgcHVibGljIFNlcnZpY2U6ICh0YXJnZXQ6IElTZXJ2aWNlQ29uc3RydWN0b3IpID0+IGFueTtcblxuICAvKipcbiAgICogcmVnaXN0ZXJzIGluc3RhbmNlIG9mIGEgY2xhc3Mgd2l0aCBnaXZlbiBydW50aW1lIGlkXG4gICAqIEBwYXJhbSBydW50aW1lX2lkXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbihhbnkpfVxuICAgKi9cbiAgcHVibGljIEluamVjdGFibGU6IChydW50aW1lX2lkOiBzdHJpbmcpID0+ICh0YXJnZXQ6IElDb25zdHJ1Y3Rvcik9PmFueTtcblxuICAvKipcbiAgICogaW5qZWN0cyBkZXBlbmRlbmN5IHdpdGggZ2l2ZW4gcnVudGltZSBpZCB0byB0aGUgZGVjb3JhdGVkIGZpZWxkIG9uIGZpcnN0IGdldFxuICAgKlxuICAgKiBAcGFyYW0gcnVudGltZV9pZCAtIHJ1bnRpbWUgaWQgb3IgYXJyYXkgb2YgcnVudGltZSBpZHNcbiAgICogQHJldHVybnMge2Z1bmN0aW9uKGFueSwgc3RyaW5nKX1cbiAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gIHB1YmxpYyBJbmplY3Q6IChydW50aW1lX2lkOiBzdHJpbmcpPT4oKHRhcmdldCwga2V5KT0+dm9pZCk7XG5cbiAgLyoqXG4gICAqIGluamVjdHMgZGVwZW5kZW5jeSB3aXRoIGdpdmVuIHJ1bnRpbWUgaWRzIHRvIHRoZSBkZWNvcmF0ZWQgY2xhc3MnZXMgY29uc3RydWN0b3JcbiAgICovXG4gIHB1YmxpYyBDb25zdHJ1Y3RvckluamVjdDogKC4uLnJ1bnRpbWVfaWQ6IHN0cmluZ1tdKT0+KHRhcmdldCk9PmFueTtcblxuICBwdWJsaWMgZ2V0Q29udGV4dCgpOiBJQ29udGV4dCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgfVxuXG4gIHB1YmxpYyBtb2NrKHJ1bnRpbWVfaWQ6IHN0cmluZywgbW9jazogYW55KSB7XG4gICAgdGhpcy5jcmVhdGVUZXN0Q29udGV4dCgpO1xuICAgIHRoaXMuZ2V0Q29udGV4dCgpLnJlZ2lzdGVyKHJ1bnRpbWVfaWQsIG1vY2ssIHRydWUpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyTW9ja3MoKSB7XG4gICAgdGhpcy5jbGVhclRlc3RDb250ZXh0KCk7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlVGVzdENvbnRleHQoKSB7XG4gICAgaWYgKHRoaXMuaXNfdGVzdF9jb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMub2xkX2NvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jb250ZXh0LmNsb25lKCk7XG4gICAgdGhpcy5pc190ZXN0X2NvbnRleHQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGNsZWFyVGVzdENvbnRleHQoKSB7XG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5vbGRfY29udGV4dDtcbiAgICB0aGlzLm9sZF9jb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLmlzX3Rlc3RfY29udGV4dCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBpc190ZXN0X2NvbnRleHQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIGNvbnRleHQ6IElDb250ZXh0ID0gbmV3IENvbnRleHQoKTtcblxuICBwcml2YXRlIG9sZF9jb250ZXh0OiBJQ29udGV4dDtcbn1cblxuXG5mdW5jdGlvbiBpc1N0cmluZyhzKTogcyBpcyBzdHJpbmcge1xuICByZXR1cm4gdHlwZW9mIHMgPT09ICdzdHJpbmcnO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
