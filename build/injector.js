var context_1 = require("./context");
var Injector = (function () {
    function Injector() {
        var _this = this;
        this.context = new context_1.default();
        this.Service = (function (target) {
            _this.context.register(target.service_name, function () { return new target(); });
            return target;
        }).bind(this);
        this.Inject = (function (runtime_id) {
            return function (target, key) {
                Object.defineProperty(target, key, {
                    get: function () {
                        return _this.context.resolve(runtime_id);
                    },
                    set: function () {
                        throw new Error("Cannot set injected field \"" + key + "\"");
                    }
                });
            };
        }).bind(this);
    }
    return Injector;
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Injector;
function isString(s) {
    return typeof s === 'string';
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluamVjdG9yLnRzIl0sIm5hbWVzIjpbIkluamVjdG9yIiwiSW5qZWN0b3IuY29uc3RydWN0b3IiLCJpc1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBQUEsd0JBQW9CLFdBQVcsQ0FBQyxDQUFBO0FBT2hDO0lBQ0VBO1FBREZDLGlCQXVDQ0E7UUFEU0EsWUFBT0EsR0FBWUEsSUFBSUEsaUJBQU9BLEVBQUVBLENBQUNBO1FBcEN2Q0EsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsQ0FBQ0EsVUFBQ0EsTUFBMkJBO1lBQzFDQSxLQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxRQUFRQSxDQUFDQSxNQUFNQSxDQUFDQSxZQUFZQSxFQUFFQSxjQUFJQSxPQUFBQSxJQUFJQSxNQUFNQSxFQUFFQSxFQUFaQSxDQUFZQSxDQUFDQSxDQUFDQTtZQUU3REEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDaEJBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBRWRBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLFVBQUNBLFVBQWtCQTtZQUNoQ0EsTUFBTUEsQ0FBQ0EsVUFBQ0EsTUFBV0EsRUFBRUEsR0FBV0E7Z0JBQzlCQSxNQUFNQSxDQUFDQSxjQUFjQSxDQUFDQSxNQUFNQSxFQUFFQSxHQUFHQSxFQUFFQTtvQkFDakNBLEdBQUdBLEVBQUVBO3dCQUNIQSxNQUFNQSxDQUFDQSxLQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtvQkFDMUNBLENBQUNBO29CQUNEQSxHQUFHQSxFQUFFQTt3QkFDSEEsTUFBTUEsSUFBSUEsS0FBS0EsQ0FBQ0EsaUNBQThCQSxHQUFHQSxPQUFHQSxDQUFDQSxDQUFBQTtvQkFDdkRBLENBQUNBO2lCQUNGQSxDQUFDQSxDQUFDQTtZQUNMQSxDQUFDQSxDQUFBQTtRQUNIQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUVoQkEsQ0FBQ0E7SUFrQkhELGVBQUNBO0FBQURBLENBdkNBLEFBdUNDQSxJQUFBO0FBdkNEOzBCQXVDQyxDQUFBO0FBR0Qsa0JBQWtCLENBQUM7SUFDakJFLE1BQU1BLENBQUNBLE9BQU9BLENBQUNBLEtBQUtBLFFBQVFBLENBQUNBO0FBQy9CQSxDQUFDQSIsImZpbGUiOiJpbmplY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb250ZXh0IGZyb20gXCIuL2NvbnRleHRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJU2VydmljZUNvbnN0cnVjdG9yIHtcbiAgbmV3KCk6IGFueTtcbiAgc2VydmljZV9uYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluamVjdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5TZXJ2aWNlID0gKCh0YXJnZXQ6IElTZXJ2aWNlQ29uc3RydWN0b3IpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC5yZWdpc3Rlcih0YXJnZXQuc2VydmljZV9uYW1lLCAoKT0+bmV3IHRhcmdldCgpKTtcblxuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9KS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5JbmplY3QgPSAoKHJ1bnRpbWVfaWQ6IHN0cmluZykgPT4ge1xuICAgICAgcmV0dXJuICh0YXJnZXQ6IGFueSwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XG4gICAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnJlc29sdmUocnVudGltZV9pZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNldCBpbmplY3RlZCBmaWVsZCBcIiR7a2V5fVwiYClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLmJpbmQodGhpcyk7XG5cbiAgfVxuICAvKipcbiAgICogcmVnaXN0ZXJzIGEgc2VydmljZVxuICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICBwdWJsaWMgU2VydmljZTogKHRhcmdldDogSVNlcnZpY2VDb25zdHJ1Y3RvcikgPT4gSVNlcnZpY2VDb25zdHJ1Y3RvcjtcblxuICAvKipcbiAgICogaW5qZWN0cyBkZXBlbmRlbmN5IHdpdGggZ2l2ZW4gcnVudGltZSBpZCB0byB0aGUgZGVjb3JhdGVkIGZpZWxkIG9uIGZpcnN0IGdldFxuICAgKlxuICAgKiBAcGFyYW0gcnVudGltZV9pZFxuICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oYW55LCBzdHJpbmcpfVxuICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgcHVibGljIEluamVjdDogKHJ1bnRpbWVfaWQ6IHN0cmluZyk9PigodGFyZ2V0LCBrZXkpPT52b2lkKTtcblxuICBwcml2YXRlIGNvbnRleHQ6IENvbnRleHQgPSBuZXcgQ29udGV4dCgpO1xufVxuXG5cbmZ1bmN0aW9uIGlzU3RyaW5nKHMpOiBzIGlzIHN0cmluZyB7XG4gIHJldHVybiB0eXBlb2YgcyA9PT0gJ3N0cmluZyc7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
